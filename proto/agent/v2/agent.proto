syntax = "proto3";

package agent.v2;

option go_package = "agent/v2";

// defining how Go REST API will communicate with Python AI agent over gRPC.
// takes in JSON blob (ProductRequest) and then returns structured ParsedProduct objects.
service ProductAgent {
    rpc ParseProducts (ProductRequest) returns (ProductResponse);
}

// request from Go to Python (product name mapped to raw JSON scraped data)
message ProductRequest {
    string json_input = 1;
}

// response from Python to Go, contains parsed product results
message ProductResponse {
    repeated ParsedProduct products = 1;
}

// representation of a parsed product and the retailer

message ParsedProduct {
    string name = 1;
    string description = 2;
    string thumbnail = 3;
    repeated string ingredients = 4;
    repeated Retailer retailers = 5;
}

message Retailer {
    string name = 1;
    string link = 2;
    double rating = 3;
    double price = 4;
    bool in_stock = 5;
}